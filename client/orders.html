<template name="orders">
    <div id="orders" class="row-fluid">

      <h4> Orders </h4>
      {{> ordersAll}}
      
      <h4> My Orders </h4>
      {{> ordersMine}}
      {{> addMenuRow }}
      
      
      <h4> </h4>
      
      {{> finishOrderButton}}
      {{> cancelOrderButton}}
    </div>
</template>

<template name="ordersAll">
  <div class="list-group">
    {{#if orders _id}}
        {{#each orders _id}}
          {{> orderItem}}
        {{/each}}
    {{else}}
          <a href="#" class="list-group-item list-group-item-default">
              Add some menus
          </a>      
    {{/if}}
  </div>
</template>

<template name="ordersMine">
  <div class="list-group list-group-flush">
    {{#each orders _id}}
      {{> orderItemMine}}
    {{/each}}
  </div>
</template>

<template name="orderItem">
      <a href="#" class="list-group-item list-group-item-success order-item">
        <span class="glyphicon glyphicon-glass"> </span>
        <a href="#" class="menu-name">{{name}}</a>

        <span class="glyphicon glyphicon-user"> </span>
         
        {{#each users}}
        {{userDisplayName this}} 
        {{/each}}
        
        {{#each guests}}
        {{this.name}}
        {{/each}}
        
        <span class="glyphicon glyphicon-tag"> </span>
        {{price}}
        <span class="badge pull-right"> {{qty}} </span>
      </a>
      
      {{#if itemEditing this._id}}
      <div class="list-group-item list-group-item-default order-item-edit">
          <input type="text" id="order-item-name" value="{{this.name}}">
          
        <button class="btn btn-success btn-sm order-item-edit-ok">
           <span class="glyphicon glyphicon-ok"> </span>
        </button>
        <button class="btn btn-danger btn-sm order-item-edit-cancel">
           <span class="glyphicon glyphicon-remove"> </span>
        </button>
        <button class="btn btn-success btn-sm order-item-metoo">
           <span class="glyphicon glyphicon-shopping-cart"> </span>           
        </button>
      </div>
      {{/if}}
 </template>

 <template name="orderItemMine">
      <a href="#" class="list-group-item list-group-item-warning order-item">
        <span class="glyphicon glyphicon-glass"> </span>
        <a href="#" class="menu-name">{{name}}</a>

        <span class="glyphicon glyphicon-tag"> </span> {{price}}
        <button class="btn btn-danger btn-sm remove-my-order pull-right">
           <span class="glyphicon glyphicon-remove"> </span>
        </button>
      </a>
 </template>

 <template name="addMenuRow">
  <form role="form" id="add-menu">
    <div class="form-group">
      <input type="text" class="form-control" id="neworder" placeholder="Enter menu">
    </div>
      <input type="hidden" id="tableId" value="{{_id}}">
    <button type="submit" class="form-control btn btn-success">Add</button>
  </form>
</template>

<template name="finishOrderButton">
  {{#if canFinishTableId _id}}
    {{#if orders _id}}
    <button class="btn btn-success form-control finish-review-orders">
        <span class="glyphicon glyphicon-ok"> </span>
        Finish & Review
    </button>    
    {{/if}}
  {{/if}}     
</template>
<template name="cancelOrderButton">
  {{#if canRemoveTableId _id}}
  <h4> </h4>
    <button class="btn btn-danger form-control remove-table">
        <span class="glyphicon glyphicon-remove"> </span>
      Cancel Orders
    </button>
  {{/if}} 
</template>